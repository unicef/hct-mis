# Generated by Django 2.2.16 on 2021-04-29 12:42
from django.db import migrations


def assign_valid_delivered_quantity(apps, schema_editor):
    PaymentRecord = apps.get_model("payment", "PaymentRecord")
    all_payment_records = PaymentRecord.objects.all()

    payment_records_to_update = []
    for payment_record in all_payment_records:
        if payment_record.currency == "USD":
            payment_record.delivered_quantity_usd = payment_record.delivered_quantity
            payment_records_to_update.append(payment_record)

    PaymentRecord.objects.bulk_update(payment_records_to_update, ["delivered_quantity_usd"])


class Migration(migrations.Migration):

    dependencies = [
        ("payment", "0026_migration"),
    ]

    operations = [
        migrations.RunPython(assign_valid_delivered_quantity),
    ]
