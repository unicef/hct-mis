[tox]
envlist = py39-django{32,40}
isolated_build = true

[testenv]
passenv = *
deps =
    django32: Django==3.2
    django40: Django==4.0
    poetry
#skipsdist = True

setenv =
    DJANGO_SETTINGS_MODULE=hct_mis_api.settings.test
    #PYTHONPATH={toxinidir}{:}{toxinidir}/..

commands =
    poetry install
	poetry run ./manage.py test --settings hct_mis_api.settings.test


[tox:.package]
whitelist_externals = poetry
# note tox will use the same python version as under what tox is installed to package
# so unless this is python 3 you can require a given python version for the packaging
# environment via the basepython key
basepython = python3.9